#include <iostream>
#include <stdlib.h>
using namespace std;

string checkFilename(const string filename, const string extension);
int compileCpp(const string fileName);
int execute(const string fileName);

int main(int argc, char** argv) {
	string originFile = *(argv + 1);
    compileCpp(originFile);
    execute(originFile);

    return 0;
}


string checkFilename(const string filename, const string extension) {
	unsigned short size = filename.length();
	string::size_type point = filename.find(".");
	if (point == string::npos) {
		return filename + "." + extension;
	}
	else {
		return filename.substr(0, point) + "." + extension;
	}
}

int compileCpp(const string filename) {
	string request = "g++ " + checkFilename(filename, "cpp");
	return system(request.c_str());
}

int execute(const string fileName) {
	return system(checkFilename(fileName, "exe").c_str());
}

